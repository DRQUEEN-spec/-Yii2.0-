<?php

use yii\helpers\Html;
use yii\grid\GridView;
use yii\widgets\ListView;
use frontend\components\TagsCloudWidget;
use frontend\components\RctReplyWidget;

use yii\helpers\HtmlPurifier;
use common\models\Comment;

/* @var $this yii\web\View */
/* @var $searchModel common\models\PostSearch */
/* @var $dataProvider yii\data\ActiveDataProvider */

?>
<style>
	.list-group-item a {
		margin: 0 10px;
		text-decoration: none;
	}

	.backTop {
		position: fixed;
		right: 0;
		bottom: 100px;
	}

	.backTop svg {
		width: 60px;
		height: 60px;
		position: relative;
	}

	.backTop:hover svg {
		transition-property: width, height;
		transition-duration: .3s, .3s;
		width: 80px;
		height: 80px;
	}
</style>

<div class="container" style="background-color: #f7f7f7;border-radius: 16px;">

	<div class="row" style="padding: 30px;">

		<div class="col-md-14">

			<ol class="breadcrumb">
				<li><a href="<?= Yii::$app->homeUrl; ?>">首页</a></li>
				<li><a href="<?= Yii::$app->homeUrl; ?>?r=post/index">文章列表</a></li>
				<li class="active"><?= $model->title ?></li>
			</ol>

			<div class="post">
				<div class="title">
					<h2><a href="<?= $model->url; ?>"><?= Html::encode($model->title); ?></a></h2>
					<div class="author">
						<span class="glyphicon glyphicon-time" aria-hidden="true"></span><em><?= date('Y-m-d H:i:s', $model->create_time) . "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"; ?></em>
						<span class="glyphicon glyphicon-user" aria-hidden="true"></span><em><?= Html::encode($model->author->nickname); ?></em>
					</div>
				</div>
				<br>
				<div class="content">
					<?= HTMLPurifier::process($model->content) ?>
				</div>
				<br>
				<div class="nav">
					<span class="glyphicon glyphicon-tag" aria-hidden="true"></span>
					<?= implode(', ', $model->tagLinks); ?>
					<br><br>
					<?= Html::a("已发布弹幕({$model->commentCount})条", $model->url . '#comments'); ?>
					<br><br>
					最后修改于 <?= date('Y-m-d H:i:s', $model->update_time); ?>
				</div>
			</div>

			<div id="comments">

				<?php if ($added) { ?>
					<br>
					<div class="alert alert-warning alert-dismissible" role="alert">
						<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>

						<h4>您的弹幕将在审核后尽快发布！</h4>

						<p><?= nl2br($commentModel->content); ?></p>
						<span class="glyphicon glyphicon-time" aria-hidden="true"></span><em><?= date('Y-m-d H:i:s', $model->create_time) . "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"; ?></em>
						<span class="glyphicon glyphicon-user" aria-hidden="true"></span><em><?= Html::encode($model->author->nickname); ?></em>
					</div>
				<?php } ?>

				<?php if ($model->commentCount >= 1) : ?>
					<?= $this->render('_comment', array(
						'post' => $model,
						'comments' => $model->activeComments,
					)); ?>
				<?php endif; ?>

				<!-- 提交 -->
				<?php
				$commentModel = new Comment();
				echo $this->render('_guestform', array(
					'id' => $model->id,
					'commentModel' => $commentModel,
				)); ?>

			</div>
		</div>
	</div>

	<div class="row">
		<div class="col-md-12">
			<!-- <div class="searchbox">
				<ul class="list-group">
					<li class="list-group-item">
						<span class="glyphicon glyphicon-search" aria-hidden="true"></span> 查找文章
					</li>
					<li class="list-group-item">
						<form class="form-inline" action="index.php?r=post/index" id="w0" method="get">
							<div class="form-group">
								<input type="text" class="form-control" name="PostSearch[title]" id="w0input" placeholder="按标题">
							</div>
							<button type="submit" class="btn btn-default">搜索</button>
						</form>

					</li>
				</ul>
			</div> -->

			<div class="tagcloudbox">
				<ul class="list-group">
					<li class="list-group-item">
						<svg style="width: 16px; height: 16px;margin-top:2px;" t="1624941889566" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1765" width="200" height="200">
							<path d="M512 1024C250.402471 1024 37.633107 836.909697 37.633107 606.936628c0-65.842125 25.552563-115.429277 50.282891-163.371958 27.386782-53.192341 55.722298-108.218901 55.089808-193.541693l-0.252996-40.732304 39.530575 9.803583c109.863372 27.260284 164.510439 90.12971 184.117603 155.149598 46.108462-81.844101 46.045213-178.235454 45.918716-309.982952V0l41.49129 13.598518c291.324521 95.632366 298.977641 333.005559 294.992959 476.26436 24.540581-46.171711 35.67239-99.49055 38.328845-123.588388l4.743669-43.135762 39.530574 17.772946c106.51118 47.689685 154.959852 171.341322 154.959852 266.088202C986.366893 836.909697 773.597529 1024 512 1024zM204.483755 292.336504c-7.273626 77.22693-35.229648 131.494503-60.339468 180.19617-23.212353 45.03323-43.262261 83.931316-43.262261 134.403954C100.882026 801.996294 285.315874 960.751081 512 960.751081s411.117974-158.754787 411.117974-353.814453c0-64.450649-28.019271-142.120321-82.033848-186.268067-12.776282 52.876096-42.250278 136.680914-106.447931 182.346634l-44.210994 31.497961-5.565905-54.014577c-1.897468-18.405435-1.138481-42.12378-0.189747-69.510562 4.237678-124.03113 11.13181-326.870414-209.164175-421.743792-0.063249 162.802718-5.123162 283.038913-111.1916 391.574058L296.574182 550.139098l13.851513-95.94861c2.90945-20.302903 9.993329-115.998518-105.94194-161.853984z" p-id="1766" fill="#f4ea2a"></path>
						</svg>
						热搜词
					</li>
					<li class="list-group-item">
						<?= TagsCloudWidget::widget(['tags' => $tags]) ?>
					</li>
				</ul>
			</div>


			<!-- <div class="commentbox">
				<ul class="list-group">
					<li class="list-group-item">
						<span class="glyphicon glyphicon-comment" aria-hidden="true"></span> 最新回复
					</li>
					<li class="list-group-item">
						<?= RctReplyWidget::widget(['recentComments' => $recentComments]) ?>
					</li>
				</ul>
			</div> -->


		</div>
	</div>
	<div class="backTop">
		<a href="#">
			<svg t="1624942785478" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2993" width="200" height="200">
				<path d="M426.666667 748.088889c12.325926 87.22963 64.474074 153.6 64.474074 153.6s52.148148-66.37037 64.474074-153.6H426.666667z" fill="#FD6513" p-id="2994"></path>
				<path d="M442.785185 746.192593c14.222222 60.681481 49.303704 104.296296 49.303704 104.296296s34.133333-43.614815 49.303704-104.296296H442.785185z" fill="#FD9C13" p-id="2995"></path>
				<path d="M395.377778 785.066667L271.17037 945.303704V724.385185l124.207408-95.762963z" fill="#F12A3F" p-id="2996"></path>
				<path d="M395.377778 664.651852v120.414815L312.888889 892.207407V729.125926z" fill="#C92334" p-id="2997"></path>
				<path d="M586.903704 785.066667L711.111111 945.303704V724.385185L586.903704 628.622222z" fill="#F12A3F" p-id="2998"></path>
				<path d="M586.903704 664.651852v120.414815l83.437037 107.14074V729.125926z" fill="#C92334" p-id="2999"></path>
				<path d="M410.548148 156.444444c2.844444-4.740741 4.740741-8.533333 7.585185-13.274074-1.896296 4.740741-4.740741 8.533333-7.585185 13.274074zM374.518519 230.4c5.688889-13.274074 11.377778-26.548148 18.014814-38.874074-6.637037 12.325926-12.325926 25.6-18.014814 38.874074z" fill="#FDB813" p-id="3000"></path>
				<path d="M421.925926 137.481481c3.792593-5.688889 7.585185-12.325926 11.377778-18.014814-3.792593 5.688889-7.585185 11.377778-11.377778 18.014814z" fill="#F12A3F" p-id="3001"></path>
				<path d="M361.244444 263.585185z" fill="#FDB813" p-id="3002"></path>
				<path d="M508.207407 62.577778c10.42963 13.274074 24.651852 33.185185 40.770371 56.888889-15.17037-24.651852-29.392593-43.614815-40.770371-56.888889zM549.925926 119.466667c3.792593 5.688889 7.585185 11.377778 11.377778 18.014814-4.740741-6.637037-8.533333-12.325926-11.377778-18.014814z" fill="#DB2639" p-id="3003"></path>
				<path d="M646.637037 537.6c-1.896296 18.962963-4.740741 36.977778-7.585185 54.044444 2.844444-17.066667 5.688889-35.081481 7.585185-54.044444zM355.555556 280.651852l5.688888-17.066667-5.688888 17.066667zM371.674074 694.992593l-5.688889-17.066667c1.896296 6.637037 3.792593 12.325926 5.688889 17.066667zM590.696296 191.525926c5.688889 12.325926 12.325926 25.6 18.014815 38.874074-5.688889-13.274074-12.325926-26.548148-18.014815-38.874074zM622.933333 660.859259c-1.896296 5.688889-3.792593 12.325926-5.688889 18.014815 1.896296-6.637037 3.792593-12.325926 5.688889-18.014815zM344.177778 591.644444c-2.844444-17.066667-5.688889-35.081481-7.585185-54.044444 1.896296 18.962963 4.740741 36.977778 7.585185 54.044444zM349.866667 620.088889c-0.948148-5.688889-2.844444-12.325926-3.792593-18.014815 0.948148 5.688889 2.844444 12.325926 3.792593 18.014815zM365.985185 677.925926zM433.303704 119.466667zM410.548148 156.444444c-1.896296 3.792593-4.740741 8.533333-6.637037 12.325926 1.896296-3.792593 4.740741-8.533333 6.637037-12.325926zM508.207407 62.577778c-10.42963-13.274074-17.066667-20.859259-17.066666-20.859259s-6.637037 7.585185-17.066667 20.859259c10.42963-13.274074 17.066667-20.859259 17.066667-20.859259s6.637037 7.585185 17.066666 20.859259zM608.711111 230.4c4.740741 10.42963 8.533333 21.807407 13.274074 33.185185-4.740741-11.377778-8.533333-22.755556-13.274074-33.185185zM403.911111 168.77037l-11.377778 22.755556 11.377778-22.755556zM355.555556 280.651852c-15.17037 46.459259-25.6 98.607407-25.6 152.651852 0 36.02963 1.896296 71.111111 5.688888 105.244444-3.792593-33.185185-5.688889-68.266667-5.688888-105.244444 0-54.044444 10.42963-106.192593 25.6-152.651852zM621.037037 263.585185l5.688889 17.066667c-0.948148-5.688889-2.844444-11.377778-5.688889-17.066667zM491.140741 748.088889h-94.814815c-4.740741-8.533333-9.481481-18.962963-14.222222-28.444445 4.740741 10.42963 9.481481 19.911111 14.222222 28.444445H587.851852c4.740741-8.533333 9.481481-18.962963 14.222222-28.444445-4.740741 10.42963-9.481481 19.911111-14.222222 28.444445H491.140741zM590.696296 191.525926l-11.377777-22.755556 11.377777 22.755556zM652.325926 433.303704c0-54.044444-10.42963-105.244444-25.6-152.651852 16.118519 46.459259 25.6 98.607407 25.6 152.651852zM579.318519 168.77037l-14.222223-25.6c3.792593 8.533333 9.481481 17.066667 14.222223 25.6zM357.451852 651.377778c-1.896296-6.637037-3.792593-12.325926-4.740741-18.962963 1.896296 6.637037 2.844444 12.325926 4.740741 18.962963zM352.711111 632.414815c-0.948148-3.792593-1.896296-7.585185-2.844444-12.325926 0.948148 3.792593 1.896296 8.533333 2.844444 12.325926z" fill="#FDB813" p-id="3004"></path>
				<path d="M491.140741 748.088889V168.77037h-87.22963l-11.377778 22.755556c-5.688889 12.325926-12.325926 25.6-18.014814 38.874074-4.740741 10.42963-8.533333 21.807407-13.274075 33.185185l-5.688888 17.066667c-15.17037 46.459259-25.6 98.607407-25.6 152.651852 0 36.02963 1.896296 71.111111 5.688888 105.244444 1.896296 18.962963 4.740741 36.977778 7.585186 54.044445 0.948148 3.792593 0.948148 6.637037 1.896296 10.429629 0.948148 5.688889 2.844444 12.325926 3.792593 18.014815 0.948148 3.792593 1.896296 7.585185 2.844444 12.325926 1.896296 6.637037 2.844444 13.274074 4.740741 18.962963 0.948148 2.844444 1.896296 6.637037 2.844444 9.481481 1.896296 5.688889 3.792593 12.325926 5.688889 18.014815l5.688889 17.066667c2.844444 8.533333 6.637037 16.118519 9.481481 23.703704 4.740741 10.42963 9.481481 19.911111 14.222223 28.444444h96.711111z" fill="#FDB813" p-id="3005"></path>
				<path d="M491.140741 168.77037V41.718519s-6.637037 7.585185-17.066667 20.859259c-10.42963 13.274074-24.651852 33.185185-40.77037 56.888889-3.792593 5.688889-7.585185 11.377778-11.377778 18.014814-0.948148 1.896296-2.844444 3.792593-3.792593 6.637038-2.844444 3.792593-4.740741 8.533333-7.585185 13.274074-1.896296 3.792593-4.740741 8.533333-6.637037 12.325926h87.22963z" fill="#F12A3F" p-id="3006"></path>
				<path d="M630.518519 632.414815c-1.896296 6.637037-2.844444 13.274074-4.740741 18.962963 0.948148-6.637037 2.844444-12.325926 4.740741-18.962963zM637.155556 602.074074c-1.896296 10.42963-3.792593 19.911111-6.637037 30.340741 1.896296-10.42963 3.792593-19.911111 6.637037-30.340741z" fill="#FD9B13" p-id="3007"></path>
				<path d="M627.674074 280.651852l-5.688889-17.066667c-3.792593-11.377778-8.533333-22.755556-13.274074-33.185185-5.688889-13.274074-11.377778-26.548148-18.014815-38.874074l-11.377777-22.755556h-87.22963v579.318519H587.851852c4.740741-8.533333 9.481481-18.962963 14.222222-28.444445 5.688889-12.325926 10.42963-26.548148 16.118519-40.77037 1.896296-5.688889 3.792593-11.377778 5.688888-18.014815 0.948148-2.844444 1.896296-5.688889 2.844445-9.481481 1.896296-6.637037 3.792593-12.325926 4.740741-18.962963 2.844444-9.481481 4.740741-19.911111 6.637037-30.340741 0.948148-3.792593 0.948148-6.637037 1.896296-10.42963 2.844444-17.066667 5.688889-35.081481 7.585185-54.044444 3.792593-33.185185 5.688889-68.266667 5.688889-105.244444-0.948148-53.096296-10.42963-105.244444-25.6-151.703704z" fill="#FD9B13" p-id="3008"></path>
				<path d="M491.140741 168.77037H578.37037l-14.222222-25.6c-0.948148-1.896296-2.844444-3.792593-3.792592-6.637037-3.792593-5.688889-7.585185-12.325926-11.377778-18.014814-16.118519-24.651852-30.340741-43.614815-40.770371-56.888889-10.42963-13.274074-17.066667-20.859259-17.066666-20.85926v128z" fill="#C92334" p-id="3009"></path>
				<path d="M384.948148 726.281481c3.792593 7.585185 7.585185 15.17037 11.377778 21.807408h95.762963v-21.807408H384.948148z" fill="#FFFFFF" p-id="3010"></path>
				<path d="M598.281481 726.281481H491.140741v21.807408h95.762963c3.792593-6.637037 7.585185-14.222222 11.377777-21.807408z" fill="#E1EDF7" p-id="3011"></path>
				<path d="M491.140741 288.237037v212.385185c58.785185 0 106.192593-47.407407 106.192592-106.192592s-47.407407-106.192593-106.192592-106.192593z" fill="#E1EDF7" p-id="3012"></path>
				<path d="M384.948148 395.377778c0 58.785185 47.407407 106.192593 106.192593 106.192592V288.237037c-58.785185 0-106.192593 48.355556-106.192593 107.140741z" fill="#FFFFFF" p-id="3013"></path>
				<path d="M491.140741 305.303704v179.2c49.303704 0 89.125926-39.822222 89.125926-89.125926s-39.822222-90.074074-89.125926-90.074074z" fill="#1E2D4F" p-id="3014"></path>
				<path d="M402.014815 395.377778c0 49.303704 39.822222 89.125926 89.125926 89.125926V305.303704c-49.303704 0-89.125926 39.822222-89.125926 90.074074z" fill="#2D4375" p-id="3015"></path>
			</svg>
		</a>
	</div>

</div>